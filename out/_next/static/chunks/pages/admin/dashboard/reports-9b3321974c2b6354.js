(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2620],{58482:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard/reports",function(){return r(94219)}])},24962:function(e){"use strict";e.exports={apiKey:"AIzaSyAX3CiXCx5ZW0N3Kh5Jn-VnGJZhSQTRRCw",authDomain:"gocab-3ba80.firebaseapp.com",databaseURL:"https://gocab-3ba80-default-rtdb.firebaseio.com",projectId:"gocab-3ba80",storageBucket:"gocab-3ba80.appspot.com",messagingSenderId:"463821131261",appId:"1:463821131261:web:e2330f002addc9d7911d94",measurementId:"G-212H0C4M2G"}},39536:function(e,t){"use strict";t.Z=class{async get(e){try{let t=await fetch("/api"+this.baseURL+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)}});if(!t.ok){let e=await t.json();throw Error(e.msg)}let r=await t.json();return{response:r.msg,error:null}}catch(e){return{response:null,error:e.message}}}async post(e,t){try{let r=await fetch("/api"+this.baseURL+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)},body:JSON.stringify(t)});if(!r.ok){let e=await r.json();throw Error(e.msg)}let n=await r.json();return{response:n.msg,error:null}}catch(e){return{response:null,error:e.message}}}async delete(e){try{let t=await fetch("/api"+this.baseURL+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)}});if(!t.ok){let e=await t.json();throw Error(e.msg)}let r=await t.json();return{response:r.msg,error:null}}catch(e){return{response:null,error:e.message}}}constructor(e,t=""){this.baseURL=e,this.token=t}}},75595:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return mainListItems}});var n=r(85893),s=r(67294),a=r(98619),i=r(48885),o=r(59334),l=r(42410),c=r(25709),d=r(48571),h=r(15498),u=r(41664),p=r.n(u),x=r(9008),g=r.n(x);function mainListItems(){return(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)(g(),{children:[(0,n.jsx)("title",{children:"Gocab"}),(0,n.jsx)("link",{rel:"icon",href:"/images/icon.png"})]}),(0,n.jsx)(p(),{href:"/admin/dashboard",children:(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(i.Z,{children:(0,n.jsx)(c.Z,{})}),(0,n.jsx)(o.Z,{primary:"Dashboard"})]})}),(0,n.jsx)(p(),{href:"/admin/dashboard/drivers",children:(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(i.Z,{children:(0,n.jsx)(l.Z,{})}),(0,n.jsx)(o.Z,{primary:"Drivers"})]})}),(0,n.jsx)(p(),{href:"/admin/dashboard/users",children:(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(i.Z,{children:(0,n.jsx)(d.Z,{})}),(0,n.jsx)(o.Z,{primary:"Users"})]})}),(0,n.jsx)(p(),{href:"/admin/dashboard/reports",children:(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(i.Z,{children:(0,n.jsx)(h.Z,{})}),(0,n.jsx)(o.Z,{primary:"Reports"})]})})]})}},9121:function(e,t,r){"use strict";r.r(t);var n=r(85893);r(67294),r(83977),r(24962),r(51019);var s=r(87357),a=r(90629),i=r(78462),o=r(97212),l=r(59334),c=r(84808),d=r(55843),h=r(16628);let u={display:"block",marginBottom:"12px"},p={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4};t.default=e=>{let{reportData:t,open:r,handleClose:x}=e;return(0,n.jsx)(d.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:r,onClose:x,closeAfterTransition:!0,slots:{backdrop:c.Z},slotProps:{backdrop:{timeout:500}},children:(0,n.jsx)(h.Z,{in:r,children:(0,n.jsx)(s.Z,{sx:p,children:(0,n.jsx)(a.Z,{children:(0,n.jsx)(i.Z,{children:t?(0,n.jsxs)(o.ZP,{style:u,children:[(0,n.jsx)(l.Z,{primary:"Email",secondary:"".concat(t.email)}),(0,n.jsx)(l.Z,{primary:"Subject",secondary:"".concat(t.subject)}),(0,n.jsx)("hr",{}),(0,n.jsx)(l.Z,{primary:"Messages",secondary:"".concat(t.message)})]}):null})})})})})}},94219:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Dashboard}});var n=r(85893),s=r(67294),a=r(90948),i=r(21265),o=r(22430),l=r(66720),c=r(77533),d=r(87357),h=r(42293),u=r(10155),p=r(78462),x=r(15861),g=r(67720),m=r(93946),j=r(14948),f=r(326),Z=r(19572),b=r(65817),w=r(75595),y=r(73084),k=r(11163),S=r(61202);let v=(0,a.ZP)(h.Z,{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:t,open:r}=e;return{zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),...r&&{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})}}}),C=(0,a.ZP)(c.ZP,{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:t,open:r}=e;return{"& .MuiDrawer-paper":{position:"relative",whiteSpace:"nowrap",width:240,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),boxSizing:"border-box",...!r&&{overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7),[t.breakpoints.up("sm")]:{width:t.spacing(9)}}}}}),P=(0,i.Z)();function Dashboard(){let e=(0,k.useRouter)(),[t,r]=s.useState(null),[a]=s.useState(()=>localStorage.getItem("adminToken")),[i,c]=s.useState(!0),toggleDrawer=()=>{c(!i)};return s.useEffect(()=>{try{let e=(0,S.o)(a);r(e)}catch(t){console.log(t),e.push("/admin/login")}},[a]),(0,n.jsx)(o.Z,{theme:P,children:(0,n.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,n.jsx)(l.ZP,{}),(0,n.jsx)(v,{position:"absolute",open:i,children:(0,n.jsxs)(u.Z,{sx:{pr:"24px"},children:[(0,n.jsx)(m.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:toggleDrawer,sx:{marginRight:"36px",...i&&{display:"none"}},children:(0,n.jsx)(f.Z,{})}),(0,n.jsxs)(x.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:[null==t?void 0:t.name," - Admin Dashboard (Messages)"]}),(0,n.jsx)(m.Z,{color:"inherit",children:(0,n.jsx)(j.Z,{badgeContent:4,color:"secondary",children:(0,n.jsx)(b.Z,{})})})]})}),(0,n.jsxs)(C,{variant:"permanent",open:i,children:[(0,n.jsx)(u.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:(0,n.jsx)(m.Z,{onClick:toggleDrawer,children:(0,n.jsx)(Z.Z,{})})}),(0,n.jsx)(g.Z,{}),(0,n.jsxs)(p.Z,{component:"nav",children:[(0,n.jsx)(w.default,{}),(0,n.jsx)(g.Z,{sx:{my:1}})]})]}),(0,n.jsxs)(d.Z,{component:"main",sx:{backgroundColor:e=>"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900],flexGrow:1,height:"100vh",overflow:"auto"},children:[(0,n.jsx)(u.Z,{}),(0,n.jsx)(y.default,{})]})]})})}},73084:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return AllReportsInformation}});var n=r(85893),s=r(67294),a=r(90629),i=r(7906),o=r(295),l=r(53252),c=r(72882),d=r(53184),h=r(45347),u=r(53816),p=r(39536),x=r(11163);r(49704);var g=r(61202),m=r(9121);let j=[{id:"email",label:"Email",minWidth:100},{id:"subject",label:"Subject",minWidth:100,format:e=>e.toLocaleString("en-US")},{id:"message",label:"Messages",minWidth:100}];function AllReportsInformation(){let[e]=s.useState(()=>localStorage.getItem("adminToken")),t=new p.Z("/admin",e),r=(0,x.useRouter)(),[f,Z]=s.useState(0),[b,w]=s.useState(5),[y,k]=s.useState(null),[S,v]=s.useState(null),[C,P]=s.useState(null),fetchreportInfo=async()=>{try{let{error:e,response:r}=await t.get("/all_reports");if(console.log(r),e)throw Error(e);k(r)}catch(e){console.log(e.message)}};s.useEffect(()=>{try{let t=(0,g.o)(e);P(t),fetchreportInfo()}catch(e){console.log(e),r.push("/admin/login")}},[e]);let[E,I]=s.useState(!1),handleOpenReportModal=e=>{v(e),I(!0)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,n.jsx)(c.Z,{sx:{maxHeight:440},children:(0,n.jsxs)(i.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,n.jsx)(d.Z,{children:(0,n.jsx)(u.Z,{style:{background:"black"},children:j.map(e=>(0,n.jsx)(l.Z,{style:{minWidth:"100"},children:e.label},e.id))})}),(0,n.jsx)(o.Z,{children:y&&y.slice(f*b,f*b+b).map((e,t)=>(0,n.jsxs)(u.Z,{hover:!0,role:"checkbox",tabIndex:-1,onClick:()=>handleOpenReportModal(e),children:[(0,n.jsx)(l.Z,{children:e.email}),(0,n.jsx)(l.Z,{children:e.subject}),(0,n.jsx)(l.Z,{children:e.message})]},t))})]})}),(0,n.jsx)(h.Z,{rowsPerPageOptions:[5,10,25,50,100],component:"div",count:null==y?void 0:y.length,rowsPerPage:b,page:f,onPageChange:(e,t)=>{Z(t)},onRowsPerPageChange:e=>{w(+e.target.value),Z(0)}})]}),S&&(0,n.jsx)(m.default,{open:E,reportData:S,handleClose:()=>I(!1)})]})}}},function(e){e.O(0,[1627,3714,9726,7739,8961,4724,1159,9717,4778,6325,6374,8604,9640,2487,9774,2888,179],function(){return e(e.s=58482)}),_N_E=e.O()}]);