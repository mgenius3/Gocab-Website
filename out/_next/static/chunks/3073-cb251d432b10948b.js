"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3073],{63441:function(e,n,t){var r=t(64836);n.Z=void 0;var o=r(t(64938)),a=t(85893),i=(0,o.default)((0,a.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download");n.Z=i},24962:function(e){e.exports={apiKey:"AIzaSyAX3CiXCx5ZW0N3Kh5Jn-VnGJZhSQTRRCw",authDomain:"gocab-3ba80.firebaseapp.com",databaseURL:"https://gocab-3ba80-default-rtdb.firebaseio.com",projectId:"gocab-3ba80",storageBucket:"gocab-3ba80.appspot.com",messagingSenderId:"463821131261",appId:"1:463821131261:web:e2330f002addc9d7911d94",measurementId:"G-212H0C4M2G"}},39536:function(e,n){n.Z=class{async get(e){try{let n=await fetch("/api"+this.baseURL+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)}});if(!n.ok){let e=await n.json();throw Error(e.msg)}let t=await n.json();return{response:t.msg,error:null}}catch(e){return{response:null,error:e.message}}}async post(e,n){try{let t=await fetch("/api"+this.baseURL+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)},body:JSON.stringify(n)});if(!t.ok){let e=await t.json();throw Error(e.msg)}let r=await t.json();return{response:r.msg,error:null}}catch(e){return{response:null,error:e.message}}}async delete(e){try{let n=await fetch("/api"+this.baseURL+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)}});if(!n.ok){let e=await n.json();throw Error(e.msg)}let t=await n.json();return{response:t.msg,error:null}}catch(e){return{response:null,error:e.message}}}constructor(e,n=""){this.baseURL=e,this.token=n}}},58461:function(e,n,t){t.r(n);var r=t(85893),o=t(67294),a=t(63441),i=t(83977),s=t(8987),l=t(24962),d=t.n(l),c=t(51019),h=t(22920);t(27967);var p=t(87357),u=t(90629),m=t(15861),f=t(78462),v=t(97212),x=t(59334),g=t(69417),j=t(21737),b=t(41664),y=t.n(b),Z=t(84808),w=t(55843),k=t(16628);let S={display:"block",marginBottom:"12px"},C={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};n.default=e=>{let{driverData:n,open:t,handleClose:l}=e,[b,D]=(0,o.useState)(!1),[R,A]=(0,o.useState)(!1),T=(0,i.ZF)(d()),E=(0,c.N8)(T),handleDriverApprovalResponse=async e=>{"approved"==e?D(!0):A(!0);let t=(0,c.iH)(E,"drivers/".concat(n.uid,"/information/verification_status"));try{await (0,c.t8)(t,"".concat(e)),"approved"==e?(D(!1),h.Am.info("Verification status updated to 'approved'")):A(!1)}catch(n){throw"approved"==e?D(!1):A(!1),Error("Error updating verification status: "+n.message)}};return(0,r.jsx)(w.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t,onClose:l,closeAfterTransition:!0,slots:{backdrop:Z.Z},slotProps:{backdrop:{timeout:500}},children:(0,r.jsx)(k.Z,{in:t,children:(0,r.jsxs)(p.Z,{sx:C,children:[(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(m.Z,{id:"transition-modal-title",variant:"h6",component:"h2",children:null==n?void 0:n.name}),(0,r.jsx)(f.Z,{children:(null==n?void 0:n.information)?(0,r.jsxs)(v.ZP,{style:S,children:[(0,r.jsx)(x.Z,{primary:"Vehicle Model",secondary:"".concat(null==n?void 0:n.information.v_model)}),(0,r.jsx)(x.Z,{primary:"Vehicle Number",secondary:"".concat(null==n?void 0:n.information.v_number)}),(0,r.jsx)(x.Z,{primary:"Vehicle Colour",secondary:"".concat(null==n?void 0:n.information.v_colour)}),(0,r.jsx)(x.Z,{primary:"Means of Identity",secondary:"".concat(null==n?void 0:n.information.means_of_identity)}),(0,r.jsx)(x.Z,{primary:"Ride Offers: ".concat(null==n?void 0:n.information.offers),secondary:"".concat(null==n?void 0:n.information.offers)}),(0,r.jsxs)(x.Z,{className:"mb-3",children:[(0,r.jsx)("p",{children:"Documents"}),(0,r.jsx)(y(),{href:null==n?void 0:n.information.documents,children:(0,r.jsxs)(g.Z,{variant:"outlined",children:[(0,r.jsx)(a.Z,{})," View"]})})]}),(null==n?void 0:n.information.verification_status)=="on review"?(0,r.jsxs)("div",{className:"flex justify-center",children:[b?(0,r.jsx)(s.Z,{variant:"outlined",loading:!0,style:{textTransform:"none",textTransform:"none",marginRight:"20px"},children:"Approve"}):(0,r.jsx)(g.Z,{variant:"contained",style:{background:"goldenrod",textTransform:"none",marginRight:"20px"},onClick:()=>handleDriverApprovalResponse("approved"),children:"Approve"}),R?(0,r.jsx)(s.Z,{variant:"outlined",loading:!0,style:{textTransform:"none",textTransform:"none"},children:"Decline"}):(0,r.jsx)(g.Z,{variant:"contained",style:{background:"red",textTransform:"none",textTransform:"none"},onClick:()=>handleDriverApprovalResponse("declined"),children:"Decline"})]}):(null==n?void 0:n.information.verification_status)=="approved"?(0,r.jsx)(j.Z,{severity:"success",children:"Request Approved"}):(0,r.jsx)(j.Z,{severity:"error",children:"Request Declined"})]}):null})]}),(0,r.jsx)(h.Ix,{position:"bottom-center"})]})})})}},83073:function(e,n,t){t.r(n),t.d(n,{default:function(){return AllDriversInformation}});var r=t(85893),o=t(67294),a=t(90629),i=t(7906),s=t(295),l=t(53252),d=t(72882),c=t(53184),h=t(45347),p=t(53816),u=t(39536),m=t(11163);t(49704);var f=t(61202),v=t(58461);let x=[{id:"name",label:"Name",minWidth:100},{id:"email",label:"Email",minWidth:100},{id:"address",label:"Address",minWidth:100,format:e=>e.toLocaleString("en-US")},{id:"phone",label:"Phone Number",minWidth:100}];function AllDriversInformation(){let[e]=o.useState(()=>localStorage.getItem("adminToken")),n=new u.Z("/admin",e),t=(0,m.useRouter)(),[g,j]=o.useState(0),[b,y]=o.useState(5),[Z,w]=o.useState(null),[k,S]=o.useState(null),[C,D]=o.useState(null),fetchDriverInfo=async()=>{try{let{error:e,response:t}=await n.get("/all_drivers");if(e)throw Error(e);w(t)}catch(e){console.log(e.message)}};o.useEffect(()=>{try{let n=(0,f.o)(e);D(n),fetchDriverInfo()}catch(e){console.log(e),t.push("/admin/login")}},[e]);let[R,A]=o.useState(!1),handleOpeDriverModal=e=>{S(e),A(!0)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,r.jsx)(d.Z,{sx:{maxHeight:440},children:(0,r.jsxs)(i.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,r.jsx)(c.Z,{children:(0,r.jsx)(p.Z,{style:{background:"black"},children:x.map(e=>(0,r.jsx)(l.Z,{style:{minWidth:"100"},children:e.label},e.id))})}),(0,r.jsx)(s.Z,{children:Z&&Z.slice(g*b,g*b+b).map((e,n)=>(0,r.jsxs)(p.Z,{hover:!0,role:"checkbox",tabIndex:-1,onClick:()=>handleOpeDriverModal(e),children:[(0,r.jsx)(l.Z,{children:e.name}),(0,r.jsx)(l.Z,{children:e.email}),(0,r.jsx)(l.Z,{children:e.address}),(0,r.jsx)(l.Z,{children:e.phone})]},n))})]})}),(0,r.jsx)(h.Z,{rowsPerPageOptions:[5,10,25,50,100],component:"div",count:null==Z?void 0:Z.length,rowsPerPage:b,page:g,onPageChange:(e,n)=>{j(n)},onRowsPerPageChange:e=>{y(+e.target.value),j(0)}})]}),k&&(0,r.jsx)(v.default,{open:R,driverData:k,handleClose:()=>A(!1)})]})}}}]);