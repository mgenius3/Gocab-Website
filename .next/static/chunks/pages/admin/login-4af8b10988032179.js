(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2300],{46863:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/login",function(){return r(64165)}])},39536:function(e,t){"use strict";t.Z=class{async get(e){try{let t=await fetch("/v1"+this.baseURL+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)}});if(!t.ok){let e=await t.json();throw Error(e.msg)}let r=await t.json();return{response:r.msg,error:null}}catch(e){return{response:null,error:e.message}}}async post(e,t){try{let r=await fetch("/v1"+this.baseURL+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)},body:JSON.stringify(t)});if(!r.ok){let e=await r.json();throw Error(e.msg)}let n=await r.json();return{response:n.msg,error:null}}catch(e){return{response:null,error:e.message}}}async delete(e){try{let t=await fetch("/v1"+this.baseURL+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)}});if(!t.ok){let e=await t.json();throw Error(e.msg)}let r=await t.json();return{response:r.msg,error:null}}catch(e){return{response:null,error:e.message}}}constructor(e,t=""){this.baseURL=e,this.token=t}}},64165:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return SignIn}});var n=r(85893),s=r(67294),o=r(69661),a=r(69417),i=r(66720),l=r(61903),c=r(66836),m=r(85071),u=r(23795),h=r(86886),d=r(87357),p=r(63845),g=r(15861),x=r(65582),f=r(21265),j=r(22430),w=r(39536),y=r(22920);r(27967);var b=r(8987),Z=r(11163);function Copyright(e){return(0,n.jsxs)(g.Z,{variant:"body2",color:"text.secondary",align:"center",...e,children:["Copyright \xa9 ",(0,n.jsx)(u.Z,{color:"inherit",href:"https://mui.com/",children:"gocab.site"})," ",new Date().getFullYear(),"."]})}let v=(0,f.Z)();function SignIn(){let e=(0,Z.useRouter)(),t=new w.Z("/admin"),[r,f]=s.useState(!1),handleSubmit=async r=>{r.preventDefault();let n=new FormData(r.currentTarget);r.preventDefault();try{f(!0);let r={email:n.get("email"),password:n.get("password")},{error:s,response:o}=await t.post("/login",r);if(s)throw Error(s);localStorage.setItem("adminToken",o),y.Am.info("successful login"),e.push("/admin/dashboard/drivers"),f(!1)}catch(e){y.Am.error(e.message),f(!1)}};return(0,n.jsx)(j.Z,{theme:v,children:(0,n.jsxs)(x.Z,{component:"main",maxWidth:"xs",children:[(0,n.jsx)(i.ZP,{}),(0,n.jsxs)(d.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(o.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,n.jsx)(p.Z,{})}),(0,n.jsx)(g.Z,{component:"h1",variant:"h5",children:"Admin - Sign in"}),(0,n.jsxs)(d.Z,{component:"form",onSubmit:handleSubmit,noValidate:!0,sx:{mt:1},children:[(0,n.jsx)(l.Z,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),(0,n.jsx)(l.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),(0,n.jsx)(c.Z,{control:(0,n.jsx)(m.Z,{value:"remember",color:"primary"}),label:"Remember me"}),(0,n.jsx)("br",{}),r?(0,n.jsxs)(b.Z,{loading:!0,variant:"outlined",className:"my-3 cursor-pointer",children:[" ","Sign In"]}):(0,n.jsx)(a.Z,{type:"submit",variant:"outlined",className:"my-3 cursor-pointer",children:"Sign In"}),(0,n.jsx)(h.ZP,{container:!0,children:(0,n.jsx)(h.ZP,{item:!0,children:(0,n.jsx)(u.Z,{href:"register",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]}),(0,n.jsx)(Copyright,{sx:{mt:8,mb:4}}),(0,n.jsx)(y.Ix,{position:"bottom-center"})]})})}}},function(e){e.O(0,[9726,7739,8961,1159,9723,8205,1903,7240,9774,2888,179],function(){return e(e.s=46863)}),_N_E=e.O()}]);